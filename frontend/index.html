<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Krypto - Auth</title>
</head>
<body>
    <h1>Bienvenue sur Krypto</h1>

    <button onclick="showRegister()">S'enregistrer</button>
    <button onclick="showLogin()">Se connecter</button>

    <div id="form-container"></div>

    <script>
        const formContainer = document.getElementById('form-container');

        function showRegister() {
            formContainer.innerHTML = `
                <h2>Inscription</h2>
                <input id="reg-username" placeholder="Username" /><br/>
                <input id="reg-password" type="password" placeholder="Password" /><br/>
                <button onclick="register()">S'enregistrer</button>
                <p id="reg-msg"></p>
            `;
        }

        function showLogin() {
            formContainer.innerHTML = `
                <h2>Connexion</h2>
                <input id="login-username" placeholder="Username" /><br/>
                <input id="login-password" type="password" placeholder="Password" /><br/>
                <button onclick="login()">Se connecter</button>
                <p id="login-msg"></p>
            `;
        }

        async function register() {
            const username = document.getElementById('reg-username').value;
            const password = document.getElementById('reg-password').value;
            const res = await fetch('/register', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({username, password})
            });
            const data = await res.json();
            document.getElementById('reg-msg').textContent = data.message || data.detail;
        }

        async function login() {
            const username = document.getElementById('login-username').value;
